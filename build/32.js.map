{"version":3,"sources":["../../src/pages/auth/login.module.ts","../../src/pages/auth/login.ts"],"names":[],"mappings":"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","file":"32.js","sourcesContent":["import { LoginPage } from './login';\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    LoginPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(LoginPage),\r\n  ],\r\n  exports: [\r\n    LoginPage\r\n  ]\r\n})\r\n\r\nexport class LoginSliderPageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/auth/login.module.ts","// import { FormBuilder, FormControl, Validator } from '@angular/forms';\r\nimport {Component, ViewChild} from '@angular/core';\r\nimport {AlertController, IonicPage, LoadingController, MenuController, NavController, Slides} from 'ionic-angular';\r\nimport {AngularFireAuth} from \"angularfire2/auth\";\r\nimport * as firebase from 'firebase/app';\r\nimport {UserService} from \"../../providers/user.service\";\r\nimport {AppState} from \"../../app/global.setting\";\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-login',\r\n  templateUrl: 'login.html',\r\n})\r\nexport class LoginPage {\r\n  public loginForm: any;\r\n  confirmPassword: string;\r\n\r\n  alive: boolean = true;\r\n\r\n  account: { username: string, password: string } = {\r\n    username: '',\r\n    password: ''\r\n  };\r\n\r\n  constructor(\r\n    public userService: UserService,\r\n    public navCtrl: NavController,\r\n    public loadingCtrl: LoadingController,\r\n    public alertCtrl: AlertController,\r\n    public afAuth: AngularFireAuth,\r\n    public global: AppState,\r\n    public menuCtrl: MenuController\r\n  ) { }\r\n\r\n  // Slider methods\r\n  @ViewChild('slider') slider: Slides;\r\n  @ViewChild('innerSlider') innerSlider: Slides;\r\n\r\n  goToLogin() {\r\n    this.navCtrl.push('FirebaseLoginPage');\r\n  }\r\n\r\n  goToSignup() {\r\n    this.navCtrl.push('RegisterPage');\r\n  }\r\n\r\n  slideNext() {\r\n    this.innerSlider.slideNext();\r\n  }\r\n\r\n  slidePrevious() {\r\n    this.innerSlider.slidePrev();\r\n  }\r\n\r\n  presentLoading(message) {\r\n    const loading = this.loadingCtrl.create({\r\n      duration: 500\r\n    });\r\n\r\n    loading.onDidDismiss(() => {\r\n      const alert = this.alertCtrl.create({\r\n        title: 'Success',\r\n        subTitle: message,\r\n        buttons: ['Dismiss']\r\n      });\r\n      alert.present();\r\n    });\r\n\r\n    loading.present();\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    //Check if already authenticated\r\n\r\n    this.userService.checkAuthentication().takeWhile(() => this.alive).subscribe(auth => {\r\n      if(auth) {\r\n        this.userService.getProfil(auth.uid).takeWhile(() => this.alive).subscribe(p =>{\r\n          this.userService._profil = p;\r\n          this.global.set('profil', p);\r\n\r\n          this.menuCtrl.enable(true, 'menu-material');\r\n          if(!this.userService._profil.uid) {\r\n            this.navCtrl.setRoot('ProfileSettingsPage', {isNew: true});\r\n          } else {\r\n            this.navCtrl.setRoot('TabsPage');\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  ionViewWillLeave() {\r\n    this.alive = false;\r\n  }\r\n\r\n  // Attempt to login in through our User service\r\n  login() {\r\n    const loading = this.loadingCtrl.create({\r\n      content: 'Please wait while login'\r\n    });\r\n\r\n    loading.present();\r\n\r\n    if(!this.account.username || !this.account.password) {\r\n      const alert = this.alertCtrl.create({\r\n        title: 'Error',\r\n        subTitle: 'Please fill fields',\r\n        buttons: ['Dismiss']\r\n      });\r\n      loading.dismissAll();\r\n      alert.present();\r\n      return;\r\n    }\r\n\r\n    this.userService.login(this.account).then(resp => {\r\n      loading.dismissAll();\r\n      this.userService.getProfil(resp.uid).takeWhile(() => this.alive).subscribe(p =>{\r\n        this.userService._profil = p;\r\n        this.global.set('profil', p);\r\n\r\n        this.menuCtrl.enable(true, 'menu-material');\r\n        if(!this.userService._profil.uid) {\r\n          this.navCtrl.setRoot('ProfileSettingsPage', {isNew: true});\r\n        } else {\r\n          this.navCtrl.setRoot('TabsPage');\r\n        }\r\n      });\r\n    }, err => {\r\n      const alert1 = this.alertCtrl.create({\r\n        title: 'Error',\r\n        subTitle: 'No valid email/password',\r\n        buttons: ['Dismiss']\r\n      });\r\n      loading.dismissAll();\r\n      alert1.present();\r\n    });\r\n\r\n\r\n  }\r\n\r\n  signup() {\r\n    if(!this.account.username || !this.account.password || this.account.password != this.confirmPassword) {\r\n      const alert = this.alertCtrl.create({\r\n        title: 'Error',\r\n        subTitle: 'No valid email/password',\r\n        buttons: ['Dismiss']\r\n      });\r\n      alert.present();\r\n      return;\r\n    }\r\n\r\n    const loading = this.loadingCtrl.create({\r\n      content: 'Please wait while creating your account'\r\n    });\r\n\r\n    loading.present();\r\n\r\n    this.userService.signup(this.account).then(resp => {\r\n      this.userService.login(this.account).then(resp1 => {\r\n        loading.dismissAll();\r\n        this.navCtrl.setRoot('ProfileSettingsPage', {isNew: true});\r\n      }, err => {\r\n        const alert1 = this.alertCtrl.create({\r\n          title: 'Error',\r\n          subTitle: 'No valid email/password',\r\n          buttons: ['Dismiss']\r\n        });\r\n        loading.dismissAll();\r\n        alert1.present();\r\n      });\r\n    }).catch(\r\n      (err) => {\r\n        //console.log(\"Unable to sign up\", err);\r\n        loading.dismissAll();\r\n        this.alertCtrl.create({\r\n          title: 'Error',\r\n          subTitle: err.message,\r\n          buttons: ['Close']\r\n        }).present();\r\n      });\r\n  }\r\n\r\n  resetPassword() {\r\n    this.presentLoading('An e-mail was sent with your new password.');\r\n  }\r\n\r\n\r\n  loginGoogle() {\r\n    this.afAuth.auth.signInWithPopup(new firebase.auth.GoogleAuthProvider()).then(\r\n      (success) => {\r\n        this.navCtrl.setRoot('TabsPage');\r\n      }).catch(\r\n      (err) => {\r\n        //console.log(\"Unable to log in\", err);\r\n      });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/auth/login.ts"],"sourceRoot":""}
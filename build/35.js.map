{"version":3,"sources":["../../src/pages/add/add.module.ts","../../src/pages/add/add.ts"],"names":[],"mappings":"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","file":"35.js","sourcesContent":["import {NgModule} from '@angular/core';\nimport {IonicPageModule} from 'ionic-angular';\nimport {AddPage} from \"./add\";\n\n@NgModule({\n  declarations: [\n    AddPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AddPage)\n  ],\n  exports: [\n    AddPage\n  ]\n})\nexport class AddModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add/add.module.ts","import {Component} from '@angular/core';\nimport {AlertController, IonicPage, NavController, LoadingController, ToastController, Platform} from 'ionic-angular';\nimport {Camera} from '@ionic-native/camera';\nimport {Crop} from \"@ionic-native/crop\";\nimport {Geolocation} from '@ionic-native/geolocation';\nimport {BarcodeScanner} from \"@ionic-native/barcode-scanner\";\nimport {UserService} from \"../../providers/user.service\";\nimport {ArticleService} from \"../../providers/article.service\";\nimport { DomSanitizer } from '@angular/platform-browser';\nimport {IpfsService} from \"../../providers/ipfs.service\";\n\n@IonicPage()\n@Component({\n  selector: 'page-add',\n  templateUrl: 'add.html',\n})\nexport class AddPage {\n\n  title:any;\n  type:any;\n  description:any;\n  price:any;\n  ean: any;\n  brand:any;\n  condition:any;\n\n  currency: any;\n\n  errorMessage: string;\n  errorMessageTP:any; //TP : Take Picture\n  taked_picture: any;\n  has_taked_picture: boolean = false;\n  readonly DEFAULT_IMAGE: string = 'http://placehold.it/300x300';\n  file: any;\n\n  constructor(\n    public toastCtrl: ToastController,\n    public loadingCtrl: LoadingController,\n    public geolocation: Geolocation,\n    public navCtrl: NavController,\n    public camera:Camera,\n    public crop:Crop,\n    public platform: Platform,\n    public alertCtrl: AlertController,\n    private articleService: ArticleService,\n    public userService: UserService,\n    public barcodeScanner: BarcodeScanner,\n    private ipfsService: IpfsService,\n    private sanitizer: DomSanitizer\n  ) {\n    //this.taked_picture = this.DEFAULT_IMAGE;\n    // if (!this.platform.is('cordova')) {\n    //   console.warn('Cordova is not available');\n    //   const alert = this.alertCtrl.create({\n    //     title: 'Attention!',\n    //     subTitle: 'Cordova is not available',\n    //     buttons: ['Close']\n    //   });\n    //   alert.present();\n    // }\n    this.currency = this.userService._profil.currency;\n  }\n\n  takePicture(event) {\n    if (this.platform.is('cordova')) {\n      this.camera.getPicture({\n        destinationType: this.camera.DestinationType.FILE_URI,\n        encodingType: this.camera.EncodingType.JPEG,\n        mediaType: this.camera.MediaType.PICTURE,\n        quality: 50,\n        targetWidth: 1000,\n        targetHeight: 1000,\n        correctOrientation: true\n      }).then((path) => {\n        // imageData is a base64 encoded string\n        this.has_taked_picture = true;\n        this.taked_picture = path;\n\n        //save to ipfs\n        // this.ipfsService.addData(this.taked_picture).then(hash => {\n        //   this.taked_picture = this.sanitizer.bypassSecurityTrustResourceUrl(this.ipfsService.gateway + hash);\n        // })\n\n        this.ipfsService.addFile(this.taked_picture, this.platform.is('cordova')).then(reader => {\n          this.ipfsService.saveToIpfs(reader).then(hash => {\n            this.taked_picture = this.ipfsService.gateway + hash;\n          })\n        });\n\n      }, (err) => {\n        //console.log(err);\n        this.errorMessageTP = err;\n        const alert = this.alertCtrl.create({\n          title: 'Error !',\n          subTitle: 'Error while taking a picture',\n          buttons: ['Close']\n        });\n        alert.present();\n      });\n    } else {\n      this.file = event.srcElement.files[0];\n      if(this.file.type.split('/')[0]=='image'){\n        this.has_taked_picture = true;\n        this.ipfsService.addFile(this.file, this.platform.is('cordova')).then(reader => {\n          this.ipfsService.saveToIpfs(reader).then(hash => {\n            this.taked_picture = this.ipfsService.gateway + hash;\n          })\n        });\n      }\n    }\n  }\n\n  takeGallery(): Promise<any> {\n    // Get Image from ionic-native's built in camera plugin\n    return this.camera.getPicture({\n      allowEdit: true,\n      sourceType: this.camera.PictureSourceType.SAVEDPHOTOALBUM,\n      mediaType: this.camera.MediaType.ALLMEDIA,\n      destinationType: this.camera.DestinationType.FILE_URI,\n      quality: 50,\n      targetWidth: 1000,\n      targetHeight: 1000,\n    })\n      .then((fileUri) => {\n        // Crop Image, on android this returns something like, '/storage/emulated/0/Android/...'\n        // Only giving an android example as ionic-native camera has built in cropping ability\n        if (this.platform.is('ios')) {\n          return fileUri\n        } else if (this.platform.is('android')) {\n          // Modify fileUri format, may not always be necessary\n          fileUri = 'file://' + fileUri;\n\n          /* Using cordova-plugin-crop starts here */\n          return this.crop.crop(fileUri, { quality: 100 });\n        }\n      })\n      .then(\n        (path) => {\n          // path looks like 'file:///storage/emulated/0/Android/data/com.foo.bar/cache/1477008080626-cropped.jpg?1477008106566'\n          this.has_taked_picture = true;\n          this.taked_picture     = path;\n\n          // save to ipfs\n          this.ipfsService.addFile(path, this.platform.is('cordova')).then(reader => {\n            this.ipfsService.saveToIpfs(reader).then(hash => {\n              this.taked_picture = this.ipfsService.gateway + hash;\n            })\n          });\n\n          return path;\n        },\n        (err) => {\n          this.errorMessage = err;\n          //console.log('Error cropping image', err);\n          const alert = this.alertCtrl.create({\n            title: 'Error !',\n            subTitle: 'Error while taking a picture',\n            buttons: ['Close']\n          });\n          alert.present();\n        }\n      )\n  }\n\n  scanCode() {\n    this.barcodeScanner.scan().then(barcodeData => {\n      this.ean = barcodeData.text;\n    }, (err) => {\n      //console.log('Error: ', err);\n    });\n  }\n\n  add(){\n    if(!this.checkForm()) {\n      return;\n    }\n\n    let loader = this.loadingCtrl.create({content: 'Please wait while publishing your item', duration: 5000});\n    loader.present();\n    let watch = this.geolocation.getCurrentPosition({ maximumAge: 300000, timeout: 5000, enableHighAccuracy: true });\n    watch.then(\n      (data) => {\n        this.articleService.saveArticle({\n          taked_picture: this.taked_picture ? this.taked_picture : this.DEFAULT_IMAGE,\n          title: this.title,\n          type: this.type,\n          description: this.description,\n          currency: this.userService._profil.currency,\n          price: this.price,\n          status: 'published',\n          latitude: data.coords.latitude + Math.random() * (0.0019 + 0.0019) - 0.0019,\n          longitude: data.coords.longitude + Math.random() * (0.0019 + 0.0019) - 0.0019,\n          uid: this.userService._userFirebase.uid,\n          brand: this.brand,\n          condition: this.condition\n        });\n\n        loader.dismissAll();\n\n        let alert = this.alertCtrl.create({\n          title: 'Published',\n          subTitle: 'Item successful published',\n          buttons: ['Close']\n        });\n\n        alert.onDidDismiss(() => {\n          this.navCtrl.pop();\n        });\n\n        alert.present();\n      }).catch((error) => {\n      this.errorMessage = error;\n      //console.log('Error : ', error);\n      const alert = this.alertCtrl.create({\n        title: 'Error',\n        subTitle: 'Error while getting your position',\n        buttons: ['Close']\n      });\n      alert.present();\n    });\n  }\n\n  save() {\n    if(!this.checkForm()) {\n      return;\n    }\n\n    let loader = this.loadingCtrl.create({content: 'Please wait while saving your item', duration: 10000});\n    loader.present();\n    this.articleService.saveInventory({\n      taked_picture: this.taked_picture,\n      title: this.title,\n      type: this.type,\n      description: this.description,\n      price: this.price,\n      currency: this.userService._profil.currency,\n      ean: this.ean,\n      uid: this.userService._userFirebase.uid,\n      status: \"inventory\",\n      brand: this.brand,\n      condition: this.condition\n    });\n\n    loader.dismiss();\n\n    let alert = this.alertCtrl.create({\n      title: 'Saved',\n      subTitle: 'Item successful saved',\n      buttons: ['Close']\n    });\n\n    alert.onDidDismiss(() => {\n      this.navCtrl.pop();\n    });\n\n    alert.present();\n  }\n\n  checkForm() {\n    if(!this.taked_picture) {\n      this.toastCtrl.create({\n        message: 'Please add a picture',\n        duration: 2000,\n        position: 'bottom'\n      }).present();\n      return false;\n    }\n\n    if(!this.title || !this.type || !this.description || !this.price || !this.condition) {\n      this.toastCtrl.create({\n        message: 'Please fill all fields',\n        duration: 2000,\n        position: 'bottom'\n      }).present();\n      return false;\n    }\n\n    if(this.price <= 0) {\n      const alert = this.alertCtrl.create({\n        title: 'Error !',\n        subTitle: 'No valid amount',\n        buttons: ['Close']\n      });\n      alert.present();\n      return false;\n    }\n\n    return true;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add/add.ts"],"sourceRoot":""}
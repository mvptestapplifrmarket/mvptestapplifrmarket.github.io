{"version":3,"sources":["../../src/pages/messages/messages.module.ts","../../src/pages/messages/messages.ts","../../src/pipes/date.pipe.ts"],"names":[],"mappings":"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","file":"9.js","sourcesContent":["import {NgModule} from '@angular/core';\nimport {IonicPageModule} from 'ionic-angular';\nimport {MessagesPage} from \"./messages\";\nimport {DateMessagePipe} from \"../../pipes/date.pipe\";\n\n@NgModule({\n  declarations: [\n    MessagesPage,\n    DateMessagePipe\n  ],\n  imports: [\n    IonicPageModule.forChild(MessagesPage)\n  ],\n  exports: [\n    MessagesPage\n  ]\n})\nexport class WalletPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/messages/messages.module.ts","import {Component, ViewChild} from '@angular/core';\r\nimport {Content, IonicPage, ModalController, NavParams} from 'ionic-angular';\r\nimport {UserService} from \"../../providers/user.service\";\r\nimport {MessageService} from \"../../providers/message.service\";\r\nimport {Profil} from \"../../providers/model/profil\";\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-messages',\r\n  templateUrl: 'messages.html',\r\n})\r\nexport class MessagesPage {\r\n  @ViewChild('content') content: Content;\r\n  messages;\r\n  discussionId;\r\n  profilOther: Profil;\r\n  profilMe: Profil;\r\n  userUid;\r\n  otherUid;\r\n\r\n  newmessage;\r\n\r\n  constructor(public modalCtrl: ModalController,\r\n              private params: NavParams,\r\n              public userService: UserService,\r\n              private messageService: MessageService\r\n  ) {\r\n    this.discussionId = this.params.get(\"id\");\r\n    this.profilOther = this.params.get(\"profil\");\r\n    this.otherUid = this.params.get(\"otherUid\");\r\n\r\n    this.userUid = this.userService._userFirebase.uid;\r\n    this.profilMe = this.userService._profil;\r\n\r\n    this.messages = this.messageService.getMessages(this.discussionId);\r\n\r\n  }\r\n\r\n  addmessage() {\r\n    this.messageService.saveMessage(this.userUid, this.otherUid, this.newmessage).then(() => {\r\n      this.content.scrollToBottom();\r\n      this.newmessage = '';\r\n    })\r\n  }\r\n\r\n  goDown(index){\r\n    //this.content.scrollToBottom();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/messages/messages.ts","import {Pipe} from '@angular/core';\r\n\r\n@Pipe({\r\n  name: 'dateMessage'\r\n})\r\nexport class DateMessagePipe {\r\n\r\n  days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\n\r\n  transform(value: string) : string {\r\n    let date = new Date(value);\r\n\r\n    let dateCurrent = new Date();\r\n    let datePrevious7Days = new Date();\r\n    let dateOffset = (24*60*60*1000) * 7; //7 days\r\n    datePrevious7Days.setTime(datePrevious7Days.getTime() - dateOffset);\r\n\r\n    if(date.getDate() + \"/\" + date.getMonth() + \"/\" + date.getFullYear() == dateCurrent.getDate() + \"/\" + dateCurrent.getMonth() + \"/\" + dateCurrent.getFullYear()) {\r\n      return (\"0\" + date.getHours()).slice(-2) + \":\" + (\"0\" + date.getMinutes()).slice(-2);\r\n    }\r\n\r\n    if(date < dateCurrent && date > datePrevious7Days) {\r\n      return this.days[date.getDay()] + \" \" + (\"0\" + date.getHours()).slice(-2) + \":\" + (\"0\" + date.getMinutes()).slice(-2);\r\n    } else {\r\n      return (\"0\" + date.getMonth()).slice(-2) + \"/\" + (\"0\" + date.getDay()).slice(-2) + \"/\" + date.getFullYear();\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/date.pipe.ts"],"sourceRoot":""}